{% load custom_filters %}
{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qtegory ë¡œê·¸ì¸</title>
    <link rel="stylesheet" href="{% static 'users/css/login.css' %}">
</head>
<body>

    <div class="login-container">
        <div class="login-card">
            <h2 class="login-title">ë¡œê·¸ì¸</h2>
            
            <form method="post" action="">
                {% csrf_token %}
                
                {% if form.errors %}
                    <p style="color: red; font-size: 12px;">ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                {% endif %}

                <div class="input-group">
                    <label for="id_username">ì•„ì´ë””</label>
                    <input type="text" name="username" id="id_username" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>

                <div class="input-group">
                    <label for="id_password">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" name="password" id="id_password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>

                <button type="submit" class="btn-login">ë¡œê·¸ì¸</button>
            </form>

            <div class="login-footer">
                <p>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="{% url 'users:signup' %}">íšŒì›ê°€ì… í•˜ëŸ¬ ê°€ê¸°</a></p>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay {% if show_popup %}active{% endif %}">
        <div class="modal-content">
            <button class="btn-close" onclick="closeModal()">Ã—</button>  <!-- ì¶”ê°€ -->
            
            <h3 class="modal-title">ë‹‰ë„¤ì„</h3>
            <p class="modal-text">ì…ì¥ ë‹‰ë„¤ì„ì€</p>
            
            <div class="nickname-box">
                {{ nickname }}
            </div>
            
            <!-- ğŸ‘‡ ê¸°ìˆ˜ ì •ë³´ ì¶”ê°€ -->
            <p class="modal-text generation-info">
                ê¸°ìˆ˜: {{ user.profile.generation|generation_format }}
            </p>
            
            <p class="modal-text">ì…ë‹ˆë‹¤.<br>ì…ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            
            <div class="modal-buttons">
                <button onclick="location.href='{{ next_url }}'" class="btn-yes">ì˜ˆ</button>
                <button class="btn-cancel" onclick="closeModal()">ì·¨ì†Œí•˜ê¸°</button>  <!-- ìˆ˜ì • -->
            </div>
        </div>
    </div>
        <!-- body ë‹«ê¸° íƒœê·¸ ì „ì— ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
    <script>
    function closeModal() {
        document.querySelector('.modal-overlay').classList.remove('active');
    }
        
        // ESC í‚¤ë¡œ ë‹«ê¸°
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeModal();
        }
    });
    </script>

</body>
</html>
