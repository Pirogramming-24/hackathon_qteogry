<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>세션 목록</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'live_sessions/live_sessions_ny.css' %}">
</head>

<body>
  <div class="page-wrapper_ny">

    <!-- ===== HEADER ===== -->
    <div class="page-header_ny">
      <div class="page-header-left_ny">
        <div class="page-title_ny">세션 목록</div>

        {% if selected_generation %}
          <div class="page-subtitle_ny">
            현재 선택된 기수:
            <strong>{{ selected_generation.name }}</strong>
          </div>
        {% endif %}
      </div>

      {% if is_session_owner %}
      <div class="admin-actions_ny">
        <a class="btn_ny btn-outline_ny btn-sm_ny"
           href="{% url 'generation_create' %}">
          + 기수 추가
        </a>

        {% if selected_generation %}
          <a class="btn_ny btn-sm_ny"
             href="{% url 'session_create' %}?generation={{ selected_generation.id }}">
            + 세션 생성
          </a>
        {% else %}
          <a class="btn_ny btn-sm_ny"
             href="{% url 'session_create' %}">
            + 세션 생성
          </a>
        {% endif %}
      </div>
      {% endif %}
    </div>


    <!-- ===== GENERATION TOGGLE ===== -->
    <div class="generation-bar_ny">
      <div class="generation-list_ny">
        {% for gen in generations %}
          <a
            href="{% url 'session_list' %}?generation={{ gen.id }}"
            class="generation-chip_ny {% if selected_generation and gen.id == selected_generation.id %}active_ny{% endif %}"
          >
            {{ gen.name }}
          </a>
        {% empty %}
          <span class="empty-text_ny">
            아직 생성된 기수가 없습니다.
          </span>
        {% endfor %}
      </div>
    </div>


    <!-- ===== MAIN CONTENT ===== -->
    <div class="content-row_ny">

      <!-- LEFT: ACTIVE -->
      <div>
        <div class="section-title_ny">
          진행 예정 / 진행 중 세션
        </div>

        {% if active_sessions %}
          {% for s in active_sessions %}
            <a href="/questions/?session={{ s.id }}" class="session-link_ny">
              <div class="session-card_ny">
                <div class="title_ny">{{ s.title }}</div>
                <div class="meta_ny">
                  {{ s.start_at|date:"Y-m-d H:i" }} ~ {{ s.end_at|date:"H:i" }}
                  {% if s.created_by %}
                    · 세션자: {{ s.created_by.username }}
                  {% endif %}
                </div>
              </div>
            </a>
          {% endfor %}
        {% else %}
          <div class="empty-box_ny">
            예정된 세션이 없습니다.
          </div>
        {% endif %}
      </div>


      <!-- RIGHT: ARCHIVE -->
      <div>
        <div class="section-title_ny">
          아카이브 세션
        </div>

        {% if archived_sessions %}
          {% for s in archived_sessions %}
            <div class="session-card_ny">
              <div class="title_ny">{{ s.title }}</div>
              <div class="meta_ny">
                {{ s.start_at|date:"Y-m-d H:i" }} ~ {{ s.end_at|date:"H:i" }}
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="empty-box_ny">
            아카이브된 세션이 없습니다.
          </div>
        {% endif %}
      </div>

    </div>
  </div>
</body>
</html>
