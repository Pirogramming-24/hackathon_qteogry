{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>세션 목록</title>
  <link rel="stylesheet" href="{% static 'live_sessions/live_sessions.css' %}">
</head>

<body>
  <div class="page-wrapper">

    <!-- ===== HEADER ===== -->
    <div class="page-header">
      <div class="page-header-left">
        <div class="page-title">세션 목록</div>

        {% if selected_generation %}
          <div class="page-subtitle">
            현재 선택된 기수:
            <strong>{{ selected_generation.name }}</strong>
          </div>
        {% endif %}
      </div>

      {% if is_session_owner %}
      <div class="admin-actions">
        <a class="btn btn-outline"
           href="{% url 'live_sessions:generation_create' %}">
          + 기수 추가
        </a>

        {% if selected_generation %}
          <a class="btn"
             href="{% url 'live_sessions:session_create' %}?generation={{ selected_generation.id }}">
            + 세션 생성
          </a>
        {% else %}
          <a class="btn"
             href="{% url 'live_sessions:session_create' %}">
            + 세션 생성
          </a>
        {% endif %}
      </div>
      {% endif %}
    </div>

    <!-- ===== GENERATION TOGGLE ===== -->
    <div class="generation-bar">
      <div class="generation-list">
        {% for gen in generations %}
          <a
            href="{% url 'live_sessions:session_list' %}?generation={{ gen.id }}"
            class="generation-chip{% if selected_generation and gen.id == selected_generation.id %} active{% endif %}"
          >
            {{ gen.name }}
          </a>
        {% empty %}
          <span class="empty-text">
            아직 생성된 기수가 없습니다.
          </span>
        {% endfor %}
      </div>
    </div>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="content-row">

      <!-- LEFT: ACTIVE -->
      <div>
        <div class="section-title">
          진행 예정 / 진행 중 세션
        </div>

        {% if active_sessions %}
          {% for s in active_sessions %}
            <a href="{% url 'questions:question_main' s.id %}" class="session-link">
              <div class="session-card">
                <div class="title">{{ s.title }}</div>
                <div class="meta">
                  {{ s.start_at|date:"Y-m-d H:i" }} ~ {{ s.end_at|date:"H:i" }}
                  {% if s.created_by %}
                    · 세션자: {{ s.created_by.username }}
                  {% endif %}
                </div>
              </div>
            </a>
          {% endfor %}
        {% else %}
          <div class="empty-box">
            예정된 세션이 없습니다.
          </div>
        {% endif %}
      </div>

      <!-- RIGHT: ARCHIVE -->
      <div>
        <div class="section-title">
          아카이브 세션
        </div>

        {% if archived_sessions %}
          {% for s in archived_sessions %}
            <div class="session-card">
              <div class="title">{{ s.title }}</div>
              <div class="meta">
                {{ s.start_at|date:"Y-m-d H:i" }} ~ {{ s.end_at|date:"H:i" }}
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="empty-box">
            아카이브된 세션이 없습니다.
          </div>
        {% endif %}
      </div>

    </div>
  </div>
</body>
</html>
