<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>세션 목록</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px 16px 48px;
    }

    /* ----- HEADER ----- */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .page-header-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .page-title {
      font-size: 24px;
      font-weight: 700;
    }

    .admin-actions {
      display: flex;
      gap: 8px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid #2f80ed;
      background: #2f80ed;
      color: #fff;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      text-decoration: none;
    }

    .btn--outline {
      background: #fff;
      color: #2f80ed;
    }

    /* ----- GENERATION BAR ----- */
    .generation-bar {
      margin: 8px 0 16px;
    }

    .generation-list {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .generation-chip {
      padding: 6px 12px;
      font-size: 14px;
      border-radius: 999px;
      border: 1px solid #ddd;
      background: white;
      cursor: pointer;
      text-decoration: none;
      color: #333;
    }

    .generation-chip.active {
      background: #2f80ed;
      color: #fff;
      border-color: #2f80ed;
    }

    /* ----- CONTENT LAYOUT ----- */
    .content-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .section-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    /* ----- SESSION CARD ----- */
    .session-card {
      border-radius: 20px;
      padding: 12px 16px;
      background: white;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 12px;
    }

    .session-card .title {
      font-weight: 700;
      margin-bottom: 4px;
    }

    .session-card .meta {
      font-size: 12px;
      color: #777;
    }

    .empty-box {
      padding: 12px;
      border-radius: 12px;
      background: white;
      border: 1px solid #eee;
      color: #999;
      font-size: 13px;
    }

    .session-link {
      text-decoration: none;
      color: inherit;
      display: block;
    }

  </style>
</head>

<body>
  <div class="page">

    <!-- ===== HEADER ===== -->
    <div class="page-header">
      <div class="page-header-left">
        <div class="page-title">세션 목록</div>

        {% if selected_generation %}
          <div style="font-size: 13px; color: #666;">
            현재 선택된 기수:
            <strong>{{ selected_generation.name }}</strong>
          </div>
        {% endif %}
      </div>

      {% if is_session_owner %}
      <div class="admin-actions">
        <a class="btn btn--outline"
           href="{% url 'generation_create' %}">
          + 기수 추가
        </a>

        {% if selected_generation %}
          <a class="btn"
             href="{% url 'session_create' %}?generation={{ selected_generation.id }}">
            + 세션 생성
          </a>
        {% else %}
          <a class="btn"
             href="{% url 'session_create' %}">
            + 세션 생성
          </a>
        {% endif %}
      </div>
      {% endif %}
    </div>


    <!-- ===== GENERATION TOGGLE ===== -->
    <div class="generation-bar">
      <div class="generation-list">
        {% for gen in generations %}
          <a
            href="{% url 'session_list' %}?generation={{ gen.id }}"
            class="generation-chip
              {% if selected_generation and gen.id == selected_generation.id %}
                active
              {% endif %}"
          >
            {{ gen.name }}
          </a>
        {% empty %}
          <span style="font-size: 13px; color: #999;">
            아직 생성된 기수가 없습니다.
          </span>
        {% endfor %}
      </div>
    </div>


    <!-- ===== MAIN CONTENT ===== -->
    <div class="content-row">

      <!-- LEFT: ACTIVE -->
      <div>
        <div class="section-title">
          진행 예정 / 진행 중 세션
        </div>

        {% if active_sessions %}
          {% for s in active_sessions %}
            <a href="/questions/?session={{ s.id }}" class="session-link">
              <div class="session-card">
                <div class="title">{{ s.title }}</div>
                <div class="meta">
                  {{ s.start_at|date:"Y-m-d H:i" }} ~ {{ s.end_at|date:"H:i" }}
                  {% if s.created_by %}
                    · 세션자: {{ s.created_by.username }}
                  {% endif %}
                </div>
              </div>
            </a>
          {% endfor %}
        {% else %}
          <div class="empty-box">
            예정된 세션이 없습니다.
          </div>
        {% endif %}



      <!-- RIGHT: ARCHIVE -->
      <div>
        <div class="section-title">
          아카이브 세션
        </div>

        {% if archived_sessions %}
          {% for s in archived_sessions %}
            <div class="session-card">
              <div class="title">{{ s.title }}</div>
              <div class="meta">
                {{ s.scheduled_at|date:"Y-m-d H:i" }}
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="empty-box">
            아카이브된 세션이 없습니다.
          </div>
        {% endif %}
      </div>

    </div>
  </div>
</body>
</html>
